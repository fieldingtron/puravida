---
import siteConfig from '../config/siteConfig.js';
const { siteName } = siteConfig;
// Commented out dark mode toggle import
// import DarkModeToggle from "./DarkModeToggle.astro";
---

<header class="bg-white dark:bg-gray-900 shadow-md w-full z-50">
  <nav class="container mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-16">
    <div class="flex items-center">
      <!-- Logo -->
      <img
        src="/puravidalogo.png"
        alt={`${siteName} Logo`}
        class="absolute h-20 w-auto -top-4 "
        style="z-index: 1;"
      />
       
      <a
        href="/"
        class="mx-4 text-lg font-bold text-gray-800 dark:text-white uppercase"
      >
        {siteName}
      </a>
    </div>

    <!-- Hamburger Icon -->
    <button
      id="mobile-menu-toggle"
      class="lg:hidden text-gray-800 dark:text-white focus:outline-none"
      aria-label="Toggle menu"
      aria-expanded="false"
    >
      <svg
        class="h-6 w-6"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M4 6h16M4 12h16m-7 6h7"
        ></path>
      </svg>
    </button>

    <!-- Menu Items -->
    <ul
      id="menu"
      class="hidden lg:flex flex-col lg:flex-row items-center justify-center bg-white dark:bg-gray-900 lg:bg-transparent
           absolute lg:relative w-full lg:w-auto top-16 lg:top-auto left-0 lg:left-auto space-y-4 lg:space-y-0 lg:space-x-6
           shadow-md lg:shadow-none pb-4 lg:pb-0 z-50"
    >
      {siteConfig.navigation.map((link) => (
        <li class="flex justify-center items-center" key={link.name}>
          <a
            class="block px-3 py-2 text-gray-800 dark:text-white hover:text-gray-600 dark:hover:text-gray-300"
            href={link.href}
          >
            {link.name}
          </a>
        </li>
      ))}
      <!-- WhatsApp Icon -->
      <li class="flex justify-center items-center">
        <a
          href="https://wa.me/+51984638855"
          target="_blank"
          rel="noopener noreferrer"
          class="block px-3 py-2 text-gray-800 dark:text-white hover:text-gray-600 dark:hover:text-gray-300"
          aria-label="WhatsApp"
        >
          <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24" class="h-6 w-6 font-semibold inline-block">
            <path d="M12 2C6.48 2 2 6.48 2 12c0 2.26.84 4.33 2.24 5.94L2 22l4.06-2.24C7.67 21.16 9.74 22 12 22c5.52 0 10-4.48 10-10S17.52 2 12 2zm0 18c-1.99 0-3.84-.73-5.3-1.94l-.36-.27-2.42 1.34.65-2.73-.28-.35C3.73 15.84 3 13.99 3 12c0-4.97 4.03-9 9-9s9 4.03 9 9-4.03 9-9 9zm4.43-6.47c-.23-.12-1.37-.68-1.58-.76-.21-.08-.36-.12-.51.12-.15.23-.59.76-.72.91-.13.15-.26.17-.49.06-.23-.12-.97-.36-1.85-1.15-.68-.6-1.14-1.34-1.28-1.57-.13-.23-.01-.35.1-.47.1-.1.23-.26.34-.39.11-.13.15-.23.23-.38.08-.15.04-.29-.02-.41-.06-.12-.51-1.23-.7-1.69-.18-.43-.36-.37-.51-.38-.13-.01-.29-.01-.45-.01-.15 0-.39.06-.6.29-.21.23-.79.77-.79 1.88s.81 2.19.92 2.34c.11.15 1.6 2.44 3.88 3.42.54.23.96.37 1.29.48.54.17 1.03.15 1.42.09.43-.06 1.37-.56 1.57-1.1.2-.54.2-1.01.14-1.1-.06-.09-.2-.15-.43-.27z"></path>
          </svg>
        </a>
      </li>
      <!-- Commented out dark mode toggle
      <li class="flex justify-center items-center">
        <DarkModeToggle />
      </li>
      -->
    </ul>
  </nav>
</header>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const menu = document.getElementById("menu");
    const toggle = document.getElementById("mobile-menu-toggle");

    if (toggle && menu) {
      toggle.addEventListener("click", () => {
        const expanded = toggle.getAttribute("aria-expanded") === "true";
        toggle.setAttribute("aria-expanded", expanded ? "false" : "true");
        menu.classList.toggle("hidden");
        
        // Update the SVG path based on menu state
        const path = toggle.querySelector("svg path");
        if (path) {
          if (menu.classList.contains("hidden")) {
            path.setAttribute("d", "M4 6h16M4 12h16m-7 6h7"); // Hamburger icon
          } else {
            path.setAttribute("d", "M6 18L18 6M6 6l12 12"); // X icon
          }
        }
      });
    }
  });
</script>
