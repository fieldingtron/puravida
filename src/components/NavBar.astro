---
import siteConfig from '../config/siteConfig.js';
const { siteName } = siteConfig;
import DarkModeToggle from "./DarkModeToggle.astro";
---

<header class="bg-white dark:bg-gray-900 shadow-md w-full z-50">
  <nav class="container mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-16">
    <div class="flex items-center">
      <!-- Logo -->
      <img
        src="/puravidalogo.png"
        alt={`${siteName} Logo`}
        class="absolute h-20 w-auto -top-4 "
        style="z-index: 1;"
      />
       
      <a
        href="/"
        class="mx-4 text-lg font-bold text-gray-800 dark:text-white uppercase"
      >
        {siteName}
      </a>
    </div>

    <!-- Hamburger Icon -->
    <button
      id="mobile-menu-toggle"
      class="lg:hidden text-gray-800 dark:text-white focus:outline-none"
      aria-label="Toggle menu"
      aria-expanded="false"
    >
      <svg
        class="h-6 w-6"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M4 6h16M4 12h16m-7 6h7"
        ></path>
      </svg>
    </button>

    <!-- Menu Items -->
    <ul
      id="menu"
      class="hidden lg:flex flex-col lg:flex-row items-center justify-center bg-white dark:bg-gray-900 lg:bg-transparent
           absolute lg:relative w-full lg:w-auto top-16 lg:top-auto left-0 lg:left-auto space-y-4 lg:space-y-0 lg:space-x-6
           shadow-md lg:shadow-none pb-4 lg:pb-0 z-50"
    >
      {siteConfig.navigation.map((link) => (
        <li class="flex justify-center items-center" key={link.name}>
          <a
            class="block px-3 py-2 text-gray-800 dark:text-white hover:text-gray-600 dark:hover:text-gray-300"
            href={link.href}
          >
            {link.name}
          </a>
        </li>
      ))}
      <li class="flex justify-center items-center">
        <DarkModeToggle />
      </li>
    </ul>
  </nav>
</header>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const menu = document.getElementById("menu");
    const toggle = document.getElementById("mobile-menu-toggle");

    if (toggle && menu) {
      toggle.addEventListener("click", () => {
        const expanded = toggle.getAttribute("aria-expanded") === "true";
        toggle.setAttribute("aria-expanded", expanded ? "false" : "true");
        menu.classList.toggle("hidden");
        
        // Update the SVG path based on menu state
        const path = toggle.querySelector("svg path");
        if (path) {
          if (menu.classList.contains("hidden")) {
            path.setAttribute("d", "M4 6h16M4 12h16m-7 6h7"); // Hamburger icon
          } else {
            path.setAttribute("d", "M6 18L18 6M6 6l12 12"); // X icon
          }
        }
      });
    }
  });
</script>
